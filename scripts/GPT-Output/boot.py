# boot.py - enable a custom HID gamepad for CircuitPython
import usb_hid

gamepad_report_descriptor = bytes([
    0x05, 0x01, 0x09, 0x05, 0xA1, 0x01, 0xA1, 0x00,
    # Buttons (16 bits)
    0x05, 0x09, 0x19, 0x01, 0x29, 0x10,
    0x15, 0x00, 0x25, 0x01,
    0x95, 0x10, 0x75, 0x01,
    0x81, 0x02,
    # Hat switch
    0x05, 0x01, 0x09, 0x39,
    0x15, 0x00, 0x25, 0x07,
    0x35, 0x00, 0x46, 0x3B, 0x01,
    0x65, 0x14,
    0x75, 0x04, 0x95, 0x01, 0x81, 0x02,
    0x75, 0x04, 0x95, 0x01, 0x81, 0x03,
    # 6 analog axes: LX, LY, RX, RY, LT, RT
    0x05, 0x01,
    0x09, 0x30, 0x09, 0x31, 0x09, 0x33,
    0x09, 0x34, 0x09, 0x32, 0x09, 0x35,
    0x15, 0x00, 0x26, 0xFF, 0x00,
    0x75, 0x08, 0x95, 0x06,
    0x81, 0x02,
    0xC0, 0xC0
])

usb_hid.enable((
    usb_hid.Device(
        report_descriptor=gamepad_report_descriptor,
        usage_page=0x01, usage=0x05,
        report_ids=(1,),
        in_report_lengths=(9,),
        out_report_lengths=(0,)
    ),
))